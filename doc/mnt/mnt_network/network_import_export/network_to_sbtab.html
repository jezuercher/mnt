<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of network_to_sbtab</title>
  <meta name="keywords" content="network_to_sbtab">
  <meta name="description" content="sbtab_document = network_to_sbtab(network,options)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">mnt</a> &gt; <a href="#">mnt_network</a> &gt; <a href="#">network_import_export</a> &gt; network_to_sbtab.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for ./mnt/mnt_network/network_import_export&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>network_to_sbtab
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>sbtab_document = network_to_sbtab(network,options)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function sbtab_document = network_to_sbtab(network,options) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> sbtab_document = network_to_sbtab(network,options)

 translate 'network' datastructure into 'sbtab' datastructure
 
 If options.filename is given -&gt; write output files: 
  [filename]_Reaction.csv
  [filename]_Compound.csv
  [filename]_QuantityData.csv (only if argument modular_rate_law_table==1)

 Options are given in the structure 'options' with fields:

 only_reaction_table   : (default 0) produce only 'Reactions' table
 modular_rate_law_table: produce table with modular rate law kinetic constants 
 filename              : file name for saving the sbtab (extension is added automatically)
 save_in_one_file      : flag for saving SBtab in one file (default = 0)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="../../.././mnt/mnt_kinetics/modular_rate_laws/modular_rate_law_functions/modular_rate_law_to_sbtab.html" class="code" title="function quantity_table = modular_rate_law_to_sbtab(network,filename,options)">modular_rate_law_to_sbtab</a>	quantity_table = modular_rate_law_to_sbtab(network,filename,options)</li><li><a href="network_adjust_names_for_sbml_export.html" class="code" title="function [metabolites,actions] = network_adjust_names_for_sbml_export(metabolites,actions)">network_adjust_names_for_sbml_export</a>	[metabolites,actions] = network_adjust_names_for_sbml_export(metabolites,actions)</li><li><a href="../../.././mnt/mnt_network/network_query/network_print_formulae.html" class="code" title="function all_result = network_print_formulae(network,actions,metabolites,all_reversible)">network_print_formulae</a>	all_result = network_print_formulae(network,actions,metabolites,all_reversible )</li><li><a href="../../.././mnt/utils/default.html" class="code" title="function commandstring = default(varargin)">default</a>	commandstring = default(varname1,defaultvalue1,varname2,defaultvalue2,...)</li><li><a href="../../.././mnt/utils/join_struct.html" class="code" title="function c = join_struct(a,b)">join_struct</a>	c = join_struct(a,b)</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function sbtab_document = network_to_sbtab(network,options)</a>
0002 
0003 <span class="comment">% sbtab_document = network_to_sbtab(network,options)</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% translate 'network' datastructure into 'sbtab' datastructure</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% If options.filename is given -&gt; write output files:</span>
0008 <span class="comment">%  [filename]_Reaction.csv</span>
0009 <span class="comment">%  [filename]_Compound.csv</span>
0010 <span class="comment">%  [filename]_QuantityData.csv (only if argument modular_rate_law_table==1)</span>
0011 <span class="comment">%</span>
0012 <span class="comment">% Options are given in the structure 'options' with fields:</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% only_reaction_table   : (default 0) produce only 'Reactions' table</span>
0015 <span class="comment">% modular_rate_law_table: produce table with modular rate law kinetic constants</span>
0016 <span class="comment">% filename              : file name for saving the sbtab (extension is added automatically)</span>
0017 <span class="comment">% save_in_one_file      : flag for saving SBtab in one file (default = 0)</span>
0018 
0019 <span class="keyword">try</span>
0020   sbtab_version;
0021 <span class="keyword">catch</span> err,
0022   error(<span class="string">'The SBtab toolbox for matlab must be installed'</span>);
0023 <span class="keyword">end</span>
0024 
0025 eval(<a href="../../.././mnt/utils/default.html" class="code" title="function commandstring = default(varargin)">default</a>(<span class="string">'options'</span>,<span class="string">'struct'</span>));
0026 options_default = struct(<span class="string">'filename'</span>,[],<span class="string">'only_reaction_table'</span>,0,<span class="string">'modular_rate_law_table'</span>,1,<span class="string">'use_sbml_ids'</span>,0,<span class="string">'verbose'</span>,1,<span class="string">'write_concentrations'</span>,1,<span class="string">'save_in_one_file'</span>,0);
0027 options         = <a href="../../.././mnt/utils/join_struct.html" class="code" title="function c = join_struct(a,b)">join_struct</a>(options_default,options);
0028 
0029 <span class="keyword">if</span> ~isfield(network,<span class="string">'kinetics'</span>),
0030   options.modular_rate_law_table = 0;
0031 <span class="keyword">end</span>
0032 
0033 <span class="comment">% if necessary, make metabolite + reaction names syntactically correct:</span>
0034 
0035 [network.metabolites,network.actions] = <a href="network_adjust_names_for_sbml_export.html" class="code" title="function [metabolites,actions] = network_adjust_names_for_sbml_export(metabolites,actions)">network_adjust_names_for_sbml_export</a>(network.metabolites,network.actions);
0036 network.formulae = <a href="../../.././mnt/mnt_network/network_query/network_print_formulae.html" class="code" title="function all_result = network_print_formulae(network,actions,metabolites,all_reversible)">network_print_formulae</a>(network,network.actions,network.metabolites);
0037 
0038 reaction_table = sbtab_table_construct(struct(<span class="string">'TableName'</span>,<span class="string">'Reaction'</span>,<span class="string">'TableType'</span>,<span class="string">'Reaction'</span>),{<span class="string">'Reaction'</span>,<span class="string">'SumFormula'</span>},{network.actions,network.formulae});
0039 
0040 <span class="keyword">if</span> isfield(network, <span class="string">'reaction_names'</span>),
0041   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'Name'</span>, network.reaction_names);
0042 <span class="keyword">end</span>
0043 
0044 <span class="keyword">if</span> isfield(network, <span class="string">'reaction_KEGGID'</span>),
0045   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'Reaction:Identifiers:kegg.reaction'</span>, network.reaction_KEGGID);
0046 <span class="keyword">end</span>
0047 
0048 <span class="keyword">if</span> isfield(network, <span class="string">'reversible'</span>),
0049   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'IsReversible'</span>,network.reversible);
0050 <span class="keyword">end</span>
0051 
0052 <span class="keyword">if</span> isfield(network, <span class="string">'genes'</span>),
0053   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'Gene'</span>,network.genes);
0054 <span class="keyword">end</span>
0055 
0056 <span class="comment">% metabolic regulation of enzymes</span>
0057 <span class="keyword">if</span> norm(network.regulation_matrix)&gt;0,
0058 [nm,nr] = size(network.N);
0059 <span class="keyword">for</span> it = 1:nr,
0060   my_line = <span class="string">''</span>;
0061   ind_pos = find(network.regulation_matrix(it,:)&gt;0);
0062   ind_neg = find(network.regulation_matrix(it,:)&lt;0);
0063   <span class="keyword">for</span> itt = 1:length(ind_pos), 
0064     my_line = [my_line <span class="string">'+ '</span> network.metabolites{ind_pos(itt)} <span class="string">' '</span>];
0065   <span class="keyword">end</span>
0066   <span class="keyword">for</span> itt = 1:length(ind_neg), 
0067     my_line = [my_line <span class="string">'- '</span> network.metabolites{ind_neg(itt)} <span class="string">' '</span>];
0068   <span class="keyword">end</span>
0069   <span class="keyword">if</span> length(my_line) , my_line = my_line(1:end-1); <span class="keyword">end</span>
0070   network.MetabolicRegulation{it,1} = my_line;
0071 <span class="keyword">end</span>
0072 <span class="keyword">end</span>
0073 
0074 <span class="keyword">if</span> isfield(network, <span class="string">'TranscriptionalRegulation'</span>),
0075   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'TranscriptionalRegulation'</span>,network.TranscriptionalRegulation);
0076 <span class="keyword">end</span>
0077 
0078 <span class="keyword">if</span> isfield(network, <span class="string">'EC'</span>),
0079   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'Enzyme:Identifiers:ec-code'</span>,network.EC);
0080 <span class="keyword">end</span>
0081 
0082 <span class="keyword">if</span> isfield(network, <span class="string">'sbml_id_reaction'</span>),
0083   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'SBML:reaction:id'</span>,network.sbml_id_reaction);
0084 <span class="keyword">end</span>
0085 
0086 <span class="keyword">if</span> isfield(network,<span class="string">'MetabolicRegulation'</span>),
0087   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'MetabolicRegulation'</span>,network.MetabolicRegulation);
0088 <span class="keyword">end</span>
0089 
0090 sbtab_document = sbtab_document_construct(struct,{<span class="string">'Reaction'</span>},{reaction_table});;
0091 
0092 <span class="keyword">if</span> ~options.only_reaction_table,
0093 
0094   compound_table = sbtab_table_construct(struct(<span class="string">'TableName'</span>,<span class="string">'Compound'</span>,<span class="string">'TableType'</span>,<span class="string">'Compound'</span>),{<span class="string">'Compound'</span>},{network.metabolites});
0095 
0096   <span class="keyword">if</span> isfield(network, <span class="string">'metabolite_names'</span>),
0097     compound_table = sbtab_table_add_column(compound_table,<span class="string">'Name'</span>, network.metabolite_names);
0098   <span class="keyword">end</span>
0099 
0100   <span class="keyword">if</span> isfield(network, <span class="string">'metabolite_KEGGID'</span>),
0101     compound_table = sbtab_table_add_column(compound_table,<span class="string">'Compound:Identifiers:kegg.compound'</span>,network.metabolite_KEGGID);
0102   <span class="keyword">end</span>
0103   
0104   <span class="keyword">if</span> isfield(network, <span class="string">'sbml_id_species'</span>),
0105     compound_table = sbtab_table_add_column(compound_table,<span class="string">'SBML:species:id'</span>,network.sbml_id_species);
0106   <span class="keyword">end</span>
0107 
0108   compound_table = sbtab_table_add_column(compound_table,<span class="string">'External'</span>, uint8(network.external));
0109 
0110   <span class="keyword">if</span> isfield(network, <span class="string">'is_cofactor'</span>),
0111     compound_table = sbtab_table_add_column(compound_table,<span class="string">'IsCofactor'</span>,network.is_cofactor);
0112   <span class="keyword">end</span>
0113 
0114   sbtab_document = sbtab_document_add_table(sbtab_document,<span class="string">'Compound'</span>,compound_table);
0115 <span class="keyword">end</span>
0116 
0117 <span class="keyword">if</span> options.modular_rate_law_table,
0118   quantity_table = <a href="../../.././mnt/mnt_kinetics/modular_rate_laws/modular_rate_law_functions/modular_rate_law_to_sbtab.html" class="code" title="function quantity_table = modular_rate_law_to_sbtab(network,filename,options)">modular_rate_law_to_sbtab</a>(network,[],struct(<span class="string">'use_sbml_ids'</span>,options.use_sbml_ids,<span class="string">'write_concentrations'</span>,options.write_concentrations));
0119   sbtab_document = sbtab_document_add_table(sbtab_document,<span class="string">'Quantity'</span>,quantity_table);
0120 <span class="keyword">end</span>
0121 
0122 <span class="keyword">if</span> ~isempty(options.filename),
0123   <span class="keyword">switch</span> options.save_in_one_file,
0124     <span class="keyword">case</span> 0, sbtab_document_save(sbtab_document,options.filename,0,options.verbose);
0125     <span class="keyword">case</span> 1, 
0126       <span class="keyword">if</span> ~strcmp(options.filename(end-3:end),<span class="string">'.csv'</span>),
0127         options.filename = [options.filename, <span class="string">'.csv'</span>];
0128         <span class="keyword">end</span>
0129       sbtab_document_save_to_one(sbtab_document,options.filename );
0130   <span class="keyword">end</span>
0131 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Sat 15-Nov-2014 18:05:26 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>