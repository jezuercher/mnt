<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of network_to_sbtab</title>
  <meta name="keywords" content="network_to_sbtab">
  <meta name="description" content="sbtab_document = network_to_sbtab(network,options)">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="#">mnt</a> &gt; <a href="index.html">mnt_network</a> &gt; network_to_sbtab.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mnt/mnt_network&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>network_to_sbtab
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>sbtab_document = network_to_sbtab(network,options)</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>function sbtab_document = network_to_sbtab(network,options) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> sbtab_document = network_to_sbtab(network,options)

 translate 'network' datastructure into 'sbtab' datastructure
 
 If options.filename is given -&gt; write output files: 
  [filename]_Reaction.tsv
  [filename]_Compound.tsv
  [filename]_QuantityData.tsv (only if argument modular_rate_law_table==1)

 Options are given in the structure 'options' with fields:

 only_reaction_table   : (default 0) produce only 'Reactions' table
 modular_rate_law_table: produce table with modular rate law kinetic constants 
 filename              : file name for saving the sbtab (extension is added automatically)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="network_adjust_names_for_sbml_export.html" class="code" title="function [metabolites,actions] = network_adjust_names_for_sbml_export(metabolites,actions)">network_adjust_names_for_sbml_export</a>	</li><li><a href="network_print_formulae.html" class="code" title="function all_result = network_print_formulae(network,actions,metabolites)">network_print_formulae</a>	all_result = network_print_formulae(network,actions,metabolites)</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function sbtab_document = network_to_sbtab(network,options)</a>
0002 
0003 <span class="comment">% sbtab_document = network_to_sbtab(network,options)</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% translate 'network' datastructure into 'sbtab' datastructure</span>
0006 <span class="comment">%</span>
0007 <span class="comment">% If options.filename is given -&gt; write output files:</span>
0008 <span class="comment">%  [filename]_Reaction.tsv</span>
0009 <span class="comment">%  [filename]_Compound.tsv</span>
0010 <span class="comment">%  [filename]_QuantityData.tsv (only if argument modular_rate_law_table==1)</span>
0011 <span class="comment">%</span>
0012 <span class="comment">% Options are given in the structure 'options' with fields:</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% only_reaction_table   : (default 0) produce only 'Reactions' table</span>
0015 <span class="comment">% modular_rate_law_table: produce table with modular rate law kinetic constants</span>
0016 <span class="comment">% filename              : file name for saving the sbtab (extension is added automatically)</span>
0017 
0018 eval(default(<span class="string">'options'</span>,<span class="string">'struct'</span>));
0019 options_default = struct(<span class="string">'filename'</span>,[],<span class="string">'only_reaction_table'</span>,0,<span class="string">'modular_rate_law_table'</span>,1);
0020 options         = join_struct(options_default,options);
0021 
0022 <span class="keyword">if</span> ~isfield(network,<span class="string">'kinetics'</span>),
0023   options.modular_rate_law_table = 0;
0024 <span class="keyword">end</span>
0025 
0026 <span class="comment">% if necessary, make metabolite + reaction names syntactically correct:</span>
0027 
0028 [network.metabolites,network.actions] = <a href="network_adjust_names_for_sbml_export.html" class="code" title="function [metabolites,actions] = network_adjust_names_for_sbml_export(metabolites,actions)">network_adjust_names_for_sbml_export</a>(network.metabolites,network.actions);
0029 network.formulae = <a href="network_print_formulae.html" class="code" title="function all_result = network_print_formulae(network,actions,metabolites)">network_print_formulae</a>(network,network.actions,network.metabolites);
0030 
0031 reaction_table = sbtab_table_construct(struct(<span class="string">'TableType'</span>,<span class="string">'Reaction'</span>),{<span class="string">'Reaction'</span>,<span class="string">'SumFormula'</span>},{network.actions,network.formulae});
0032 
0033 <span class="keyword">if</span> isfield(network, <span class="string">'reaction_names'</span>),
0034   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'Name'</span>, network.reaction_names);
0035 <span class="keyword">end</span>
0036 
0037 <span class="keyword">if</span> isfield(network, <span class="string">'reaction_KEGGID'</span>),
0038   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'MiriamID__urn_miriam_kegg_reaction'</span>, network.reaction_KEGGID);
0039 <span class="keyword">end</span>
0040 
0041 <span class="keyword">if</span> isfield(network, <span class="string">'reversible'</span>),
0042   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'IsReversible'</span>,network.reversible);
0043 <span class="keyword">end</span>
0044 
0045 <span class="keyword">if</span> isfield(network, <span class="string">'genes'</span>),
0046   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'Gene'</span>,network.genes);
0047 <span class="keyword">end</span>
0048 
0049 <span class="comment">% metabolic regulation of enzymes</span>
0050 [nm,nr] = size(network.N);
0051 <span class="keyword">for</span> it = 1:nr,
0052   my_line = <span class="string">''</span>;
0053   ind_pos = find(network.regulation_matrix(it,:)&gt;0);
0054   ind_neg = find(network.regulation_matrix(it,:)&lt;0);
0055   <span class="keyword">for</span> itt = 1:length(ind_pos), 
0056     my_line = [my_line <span class="string">'+ '</span> network.metabolites{ind_pos(itt)} <span class="string">' '</span>];
0057   <span class="keyword">end</span>
0058   <span class="keyword">for</span> itt = 1:length(ind_neg), 
0059     my_line = [my_line <span class="string">'- '</span> network.metabolites{ind_neg(itt)} <span class="string">' '</span>];
0060   <span class="keyword">end</span>
0061   <span class="keyword">if</span> length(my_line) , my_line = my_line(1:end-1); <span class="keyword">end</span>
0062   network.MetabolicRegulation{it,1} = my_line;
0063 <span class="keyword">end</span>
0064 
0065 <span class="keyword">if</span> isfield(network, <span class="string">'TranscriptionalRegulation'</span>),
0066   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'TranscriptionalRegulation'</span>,network.TranscriptionalRegulation);
0067 <span class="keyword">end</span>
0068 
0069 <span class="keyword">if</span> isfield(network, <span class="string">'EC'</span>),
0070   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'MiriamID__urn_miriam_ec_code'</span>,network.EC);
0071 <span class="keyword">end</span>
0072 
0073 <span class="keyword">if</span> isfield(network, <span class="string">'sbml_id_reaction'</span>),
0074   reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'SBML__reaction__ID'</span>,network.sbml_id_reaction);
0075 <span class="keyword">end</span>
0076 
0077 
0078 reaction_table = sbtab_table_add_column(reaction_table,<span class="string">'MetabolicRegulation'</span>,network.MetabolicRegulation);
0079 sbtab_document = sbtab_document_construct(struct,{<span class="string">'Reaction'</span>},{reaction_table});;
0080 
0081 <span class="keyword">if</span> ~options.only_reaction_table,
0082 
0083   compound_table = sbtab_table_construct(struct(<span class="string">'TableType'</span>,<span class="string">'Compound'</span>),{<span class="string">'Compound'</span>,<span class="string">'External'</span>},{network.metabolites,network.external});
0084 
0085   <span class="keyword">if</span> isfield(network, <span class="string">'metabolite_names'</span>),
0086     compound_table = sbtab_table_add_column(compound_table,<span class="string">'Name'</span>, network.metabolite_names);
0087   <span class="keyword">end</span>
0088 
0089   <span class="keyword">if</span> isfield(network, <span class="string">'metabolite_KEGGID'</span>),
0090     compound_table = sbtab_table_add_column(compound_table,<span class="string">'MiriamID__urn_miriam_kegg_compound'</span>,network.metabolite_KEGGID);
0091   <span class="keyword">end</span>
0092   
0093   <span class="keyword">if</span> isfield(network, <span class="string">'sbml_id_species'</span>),
0094     compound_table = sbtab_table_add_column(compound_table,<span class="string">'SBML__species__ID'</span>,network.sbml_id_species);
0095   <span class="keyword">end</span>
0096 
0097   <span class="keyword">if</span> isfield(network, <span class="string">'is_cofactor'</span>),
0098     compound_table = sbtab_table_add_column(compound_table,<span class="string">'IsCofactor'</span>,network.is_cofactor);
0099   <span class="keyword">end</span>
0100 
0101   sbtab_document = sbtab_document_add_table(sbtab_document,<span class="string">'Compound'</span>,compound_table);
0102 <span class="keyword">end</span>
0103 
0104 <span class="keyword">if</span> options.modular_rate_law_table,
0105   quantity_table = modular_rate_law_to_sbtab(network);
0106   sbtab_document = sbtab_document_add_table(sbtab_document,<span class="string">'QuantityData'</span>,quantity_table);
0107 <span class="keyword">end</span>
0108 
0109 <span class="keyword">if</span> ~isempty(options.filename),
0110   sbtab_save_document(sbtab_document,options.filename)
0111 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Fri 05-Apr-2013 15:19:47 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>